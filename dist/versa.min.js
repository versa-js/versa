class e{node=null;base="base";constructor(e,t=""){this.node=e,this.base=t}html(e){return this.node.innerHTML=e,this}append(e){if("string"==typeof e||e instanceof String){let t=document.createElement("div");t.innerHTML=e;for(const e of t.children)this.node.appendChild(e);return this}return this.node.appendChild(el),this}state(e,t){let n=this.node.classList,s=`is-${e}`;return t?(n.add(s),this):(n.remove(s),this)}is(e){return this.node.classList.contains(`is-${e}`)}element(t){return new e(this.node.querySelector(`.${this.base}__${t}`),this.base)}elements(t){let n=[];for(let s of this.node.querySelectorAll(`.${this.base}__${t}`))n.push(new e(s,this.base));return n}}const t=new class{mutationObserver=null;modules={};events=[];addEvent(e){-1==this.events.indexOf(e)&&(document.addEventListener(e,(e=>this.handleEvent(e)),!0),this.events.push(e))}addModule(e){this.modules[e.name]=e}getModule(e){return this.modules[e]}handleEvent(e){e.target&&e.target.tagName&&-1==["HTML"].indexOf(e.target.tagName)&&(e.target==document.body?this.handleGlobalEvent(e):this.handleComponentEvent(e))}handleGlobalEvent(t){let n=document.querySelectorAll("[data-component]");for(let s of n){let n=s.dataset.component,l=this.modules[n],o=`_${t.type}`;l.events&&l.events[o]&&l.events[o].call(l,new e(s,l.name),t)}}handleComponentEvent(t){let n=t.composedPath().filter((e=>e.tagName&&-1==["HTML"].indexOf(e.tagName))),s=n.filter((e=>e.dataset.component));for(let l of s){let s=this.modules[l.dataset.component];for(let o in s.events[t.type]){let a=l.querySelectorAll(`.${o}`);if(a)for(let i of a)-1!=n.indexOf(i)&&s.events[t.type][o].call(s,new e(l,s.name),new e(i,s.name),t)}}}};class n{name="component";elements={};global={};events={};install(e){}bootstrap(){for(let e in this.elements)for(let n in this.elements[e])this.register(`${this.name}__${e}`,n,this.elements[e][n]),t.addEvent(n);for(let e in this.global)this.events[`_${e}`]=this.global[e],t.addEvent(e)}register(e,t,n){this.events[t]||(this.events[t]={}),this.events[t][e]||(this.events[t][e]={}),this.events[t][e]=n}static addModule(e){Object.keys(e.events).length||e.bootstrap(),t.addModule(e)}}const s=()=>{for(let n of document.querySelectorAll("[data-component]")){if(n.installed)continue;let s=n.dataset.component,l=t.getModule(s);if(l){try{l.install.call(l,new e(n,l.name)),n.installed=!0}catch(e){n.installed=!0,console.error(e)}return}import(`/versa/${s}/module.js`).then((s=>{let l=new s.default;t.addModule(l);try{l.bootstrap(),l.install.call(l,new e(n,l.name)),n.installed=!0}catch(e){n.installed=!0,console.error(e)}}))}};function l(e,t){const n=new Event(e);n.payload=t,document.body.dispatchEvent(n)}new MutationObserver(((e,t)=>{let n=!1;for(let t of e){if("childList"!==t.type||!t.addedNodes.length)return;n=!0}n&&s()})).observe(document.body,{childList:!0,subtree:!0}),setTimeout(s);export{n as Component,n as default,l as emit};