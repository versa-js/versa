const e=Object.assign({base:"/versa"},window.versaEnv||{});class t{node=null;base="base";constructor(e,t=""){this.node=e,this.base=t}append(e){if("string"==typeof e||e instanceof String){let t=document.createElement("div");t.innerHTML=e;for(const e of t.children)this.node.appendChild(e);return this}return this.node.appendChild(el),this}state(e,t){let n=this.node.classList,s=`is-${e}`;return t?(n.add(s),this):(n.remove(s),this)}is(e){return this.node.classList.contains(`is-${e}`)}element(e){return new t(this.node.querySelector(`.${this.base}_${e}`),this.base)}elements(e){let n=[];for(let s of this.node.querySelectorAll(`.${this.base}_${e}`))n.push(new t(s,this.base));return n}}const n=new class{mutationObserver=null;modules={};events=[];addEvent(e){-1==this.events.indexOf(e)&&(document.addEventListener(e,(e=>this.handleEvent(e)),!0),this.events.push(e))}addModule(e){this.modules[e.name]=e}handleEvent(e){e.target&&e.target.tagName&&-1==["HTML"].indexOf(e.target.tagName)&&(e.isGlobal?this.handleGlobalEvent(e):this.handleComponentEvent(e))}handleGlobalEvent(e){let n=document.querySelectorAll("[data-component]");for(let s of n){let n=s.dataset.component,l=this.modules[n];l.events[e.type][n]&&l.events[e.type][n].call(l,new t(s,l.name),e)}}handleComponentEvent(){let e=event.composedPath().filter((e=>e.tagName&&-1==["HTML"].indexOf(e.tagName))),n=e.filter((e=>e.dataset.component));for(let s of n){let n=this.modules[s.dataset.component];for(let l in n.events[event.type]){let o=s.querySelectorAll(`.${l}`);if(o)for(let a of o)-1!=e.indexOf(a)&&n.events[event.type][l].call(n,new t(a,n.name),new t(s,n.name),event)}}}};class s{name="component";elements={};global={};events={};install(e){}bootstrap(){for(let e in this.elements)for(let t in this.elements[e])this.register(`${this.name}__${e}`,t,this.elements[e][t]),n.addEvent(t);for(let e in this.global)this.register(`${this.name}`,e,this.global[e]),n.addEvent(e)}register(e,t,n){this.events[t]||(this.events[t]={}),this.events[t][e]||(this.events[t][e]={}),this.events[t][e]=n}emit(e,t){const n=new Event(e);n.payload=t,n.isGlobal=!0,document.body.dispatchEvent(n)}}const l=()=>{for(let s of document.querySelectorAll("[data-component]")){if(s.installed)continue;let l=s.dataset.component;import(`${e.base}/${l}/module.js`).then((e=>{let o=new e.default;n.addModule(o),s.component_name=l;try{o.bootstrap(),o.install.call(o,new t(s,o.name)),s.installed=!0}catch(e){s.installed=!0,console.error(e)}}))}};new MutationObserver(((e,t)=>{let n=!1;for(let t of e){if("childList"!==t.type||!t.addedNodes.length)return;n=!0}n&&l()})).observe(document.body,{childList:!0,subtree:!0}),l();export{s as default};